---
title: "Using buffers vs 'within distance' approaches" 
author: Olivier
date: "2022-04-02"
slug: buffer-distance
categories: [vignette]
tags: [geocompr2, buffers, rstats]
draft: true
---

```{r, eval=TRUE, echo=FALSE}
# Add references
rbbt::bbt_update_bib(path_rmd = "buffer-vs-within-distance.Rmd", path_bib = "buffer-vs-within-distance.bib")
```

This post explores ways of calculating whether or not objects are within a certain distance of another object.
This may sound rather abstract and the situation is perhaps best understood with reference to a concrete example: how many restaurants are within one mile of a highway?
This question is posed by @obe_postgis_2015 who demonstrate methods, implemented in reproducible SQL code, to answer it.

Before reproducing their example in R and PostGIS, which can be called from R, we will demonstrate the basic scenario with reference to a minimal reproducible example.

## Minimal reproducible example

Imagine that there are 100 restaurants and only five highways.
Based on the simplifying assumption that highways can be represented as points, we can generate a minimal example to demonstrate the question with a few lines of R code to generate (psuedo) randomly located points.

```{r}
library(sf)
library(dplyr)
library(tmap)
set.seed(2022)
point_locations = data.frame(
  x = rnorm(n = 100, mean = 0, sd = 1),
  y = rnorm(n = 100, mean = 0, sd = 1),
  n = 1:100
) %>% 
  st_as_sf(coords = c("x", "y"))

target_points = data.frame(
  x = rnorm(n = 5, mean = 0, sd = 1),
  y = rnorm(n = 5, mean = 0, sd = 1),
  n = 1:5
) %>% 
  st_as_sf(coords = c("x", "y"))
target_buffers = st_buffer(target_points, dist = 0.2)
```

```{r}
tm_shape(point_locations) +
  tm_dots() +
  tm_shape(target_buffers) +
  tm_borders()
```

# References

